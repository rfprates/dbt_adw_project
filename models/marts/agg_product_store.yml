version: 2

models:
  - name: agg_product_store
    description: aggregate table with all stores registered and the products that were bought on each sales order related to this stores
    columns:
      - name: orderdate
        description: date the sales order was created
      
      - name: storeid
        description: foreign key for store
        tests:
          - relationships:
              field: businessentityid
              to: ref('stg_store')
      
      - name: store
        description: the store name
      
      - name: productid
        description: foreign key for product
        tests:
          - relationships:
              field: productid
              to: ref('stg_product')
      
      - name: product
        description: the name of product
      
      - name: province
        description: the state or province name of each address
      
      - name: country
        description: the country name of each province
      
      - name: orderqty
        description: quantity of product on each sale